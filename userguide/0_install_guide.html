

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation &mdash; Stytra 0.8.34 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Designing and running experiments" href="1_examples_gallery.html" />
    <link rel="prev" title="References" href="../overview/9_references.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4987a7" >
          

          
            <a href="../index.html" class="icon icon-home"> Stytra
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.8.32
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/0_motivation.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/1_library_structure.html">The structure of Stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/2_stimulation_intro.html">Stimulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/3_tracking.html">Image acquisition and tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/4_closed_loop.html">Closed-loop stimuli design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/5_external_sync.html">Synchronizing stimulation with data acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/6_hardware_list.html">Hardware description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/7_comparison.html">Comparison with existing software and limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/8_replication.html">Experiment replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/9_references.html">References</a></li>
</ul>
<p class="caption"><span class="caption-text">User guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing-stytra">Installing stytra</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-file">1) Environment file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual-installation">2) Manual installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#editable-installation">Editable installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-the-installation">Testing the installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#installing-camera-apis">Installing camera APIs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#xicam-ximea">xiCam: Ximea</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pymba-avt">pymba: AVT</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spinnaker-point-grey-flir">Spinnaker: Point Grey / FLIR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#national-instruments-framegrabber-with-mikrotron-camera">National Instruments framegrabber with Mikrotron camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basler-pypylon">Basler: pypylon</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#external-hardware-support">External hardware support</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#national-instruments-boards">National Instruments Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#labjack-u3">LabJack U3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyboard-arduino">PyBoard/Arduino</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="1_examples_gallery.html">Designing and running experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_tracking.html">Tracking configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_calibration.html">Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_configuring_computer.html">Configuring a computer for Stytra experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_coordinate_systems.html">Coordinate systems in Stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_offline.html">Offline use of Stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="8_faqs.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/0_module_desc.html">Module description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/1_pipelines.html">Implementation of image processing pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/2_triggering_intro.html">Triggering a Stytra protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/3_data_saving.html">Data and metadata saving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/4_parameters_stytra.html">Parameters in stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/5_status_messages.html">Process status messages</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Stytra</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Installation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/userguide/0_install_guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>Stytra was developed and tested using Python 3.7 installed as part of the
<a class="reference external" href="https://www.anaconda.com/download/">Anaconda Python</a> distribution. Other Python versions have not been tested, although Python 3.6 will work. Python 3.5 is not supported.</p>
<p>The latest version of Anaconda or Miniconda is recommended. Installation without Anaconda can be achieved but dependencies issues might be difficult to resolve, especially on Windows. The following two variants of instructions have been tested:</p>
<div class="section" id="installing-stytra">
<h2>Installing stytra<a class="headerlink" href="#installing-stytra" title="Permalink to this headline">¶</a></h2>
<div class="section" id="environment-file">
<h3>1) Environment file<a class="headerlink" href="#environment-file" title="Permalink to this headline">¶</a></h3>
<p>The provided conda environment.yml file that should install everything except the camera support (described below). The environment file should work with any recent version of Anaconda or Miniconda on all platforms.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">environment</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>Then, you have to activate the environment and install stytra:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="n">stytra</span>
<span class="n">pip</span> <span class="n">install</span> <span class="n">stytra</span>
</pre></div>
</div>
<p>When you want to use Stytra, ensure that you are in the stytra environment (<code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">stytra</span></code>) in the Anaconda prompt.
Many Python editors and IDEs such as PyCharm or Visual Studio Code support setting a conda environment for projects and files.</p>
</div>
<div class="section" id="manual-installation">
<h3>2) Manual installation<a class="headerlink" href="#manual-installation" title="Permalink to this headline">¶</a></h3>
<p>Stytra relies on <a class="reference external" href="https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_tutorials.html">opencv</a> for some of its fish tracking
functions. If you don’t have it installed, open the Anaconda prompt and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">opencv</span><span class="o">-</span><span class="n">python</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sometimes, OpenCV installation does not work properly (DLL not found error when importin cv2), this can be fixed by installing a wheel directly from <a class="reference external" href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#opencv">https://www.lfd.uci.edu/~gohlke/pythonlibs/#opencv</a></p>
</div>
<p>If you are using Windows, git (used for tracking software versions) might not be
installed. Git can also be easily installed with conda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">git</span>
</pre></div>
</div>
<p>Also, for some video-related operations (offline tracking and saving of stimulus videos), a version of ffmpeg with libx264 has to be installed, for this, use the conda-forge channel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span> <span class="n">ffmpeg</span>
</pre></div>
</div>
<p>as well as <a class="reference external" href="https://github.com/mikeboers/PyAV">PyAV</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">av</span> <span class="o">-</span><span class="n">c</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span>
</pre></div>
</div>
<p>These are all requirements not covered by the next installation step.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PyQt5 is not listed as an explicit requirement because it should
come with
the Anaconda package. If you are not using Anaconda, make sure you have it
installed and updated before installing Stytra!</p>
</div>
<p>The simplest way to install Stytra is with pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">stytra</span>
</pre></div>
</div>
</div>
<div class="section" id="editable-installation">
<h3>Editable installation<a class="headerlink" href="#editable-installation" title="Permalink to this headline">¶</a></h3>
<p>On the other hand, if you want to modify the internals of stytra or use unreleased features, clone or download stytra from <a class="reference external" href="https://github.com/portugueslab/stytra">github</a> and install it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">path_to_stytra</span><span class="o">/</span><span class="n">stytra</span>
</pre></div>
</div>
<p>If you want to be able to change the stytra code and use the changed version,
install using the -e argument:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="n">path_to_stytra</span><span class="o">/</span><span class="n">stytra</span>
</pre></div>
</div>
<p>Now you can have a look at the stytra <a class="reference internal" href="1_examples_gallery.html#examples-gallery"><span class="std std-ref">Examples gallery</span></a>, or you can start
<a class="reference internal" href="5_configuring_computer.html#configuring-a-computer-for-stytra-experiments"><span class="std std-ref">Configuring a computer for Stytra experiments</span></a>.
In the second case, you might want to have a look at the camera APIs section below first.</p>
</div>
<div class="section" id="testing-the-installation">
<h3>Testing the installation<a class="headerlink" href="#testing-the-installation" title="Permalink to this headline">¶</a></h3>
<p>You can verify the installation by running one of the examples in stytra
examples folder. To run a simple looming stimulus experiment, you can
type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">stytra</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">looming_exp</span>
</pre></div>
</div>
<p>If the GUI opens correctly and pressing the play button starts the stimulus:
congratulations, installation was successful! If it crashes, check
if you have all dependencies correctly installed. If it still does not work,
open an issue on the <a class="reference external" href="https://github.com/portugueslab/stytra">Stytra github page</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Stytra might raise an error after quitting because of a bug in the current
version of pyqtgraph (a package we are using for online plotting).
If you are annoyed by the error messages
when closing the program you can install the develop version of pyqtgraph
from their <a class="reference external" href="https://github.com/pyqtgraph/pyqtgraph">github repository</a>.
The problem will be resolved once the next pyqtgraph version is released.</p>
</div>
</div>
</div>
<div class="section" id="installing-camera-apis">
<h2>Installing camera APIs<a class="headerlink" href="#installing-camera-apis" title="Permalink to this headline">¶</a></h2>
<div class="section" id="xicam-ximea">
<h3>xiCam: Ximea<a class="headerlink" href="#xicam-ximea" title="Permalink to this headline">¶</a></h3>
<p>Download the <a class="reference external" href="https://www.ximea.com/support/wiki/apis/APIs">Ximea SDK software pacakge for your operating system</a>,
during the installation wizard make sure that you select the python API checkbox.
After installation, copy the python wrapper API (in the folder where you installed XIMEA, …XIMEAAPIPythonv3ximea) into
the Python site-packages folder (for anaconda, usually the folder …anaconda3Libsite-packages)</p>
</div>
<div class="section" id="pymba-avt">
<h3>pymba: AVT<a class="headerlink" href="#pymba-avt" title="Permalink to this headline">¶</a></h3>
<p>Go to the <a class="reference external" href="https://www.alliedvision.com/en/products/software.html">Allied Vision software webpage</a>
and download and install the Vimba SDK. Then install the python wrapper
<a class="reference external" href="https://github.com/morefigs/pymba">pymba</a>. You can install it from source:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">git</span><span class="o">+</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">morefigs</span><span class="o">/</span><span class="n">pymba</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>or, if using 64bit windows, you can grab the installation file from <a class="reference external" href="http://www.portugueslab.com/files/pymba-0.1-py3-none-any.whl">here</a>.
Open the terminal in the folder where you downloaded it and install:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pymba</span><span class="o">-</span><span class="mf">0.1</span><span class="o">-</span><span class="n">py3</span><span class="o">-</span><span class="n">none</span><span class="o">-</span><span class="nb">any</span><span class="o">.</span><span class="n">whl</span>
</pre></div>
</div>
</div>
<div class="section" id="spinnaker-point-grey-flir">
<h3>Spinnaker: Point Grey / FLIR<a class="headerlink" href="#spinnaker-point-grey-flir" title="Permalink to this headline">¶</a></h3>
<p>Go the the <a class="reference external" href="https://flir.app.boxcn.net/v/SpinnakerSDK">FLIR support website</a>, download and install the SDK and the Python API.</p>
<ol class="arabic">
<li><p>Install the SDK: select the operating system, and then Latest Spinnaker Web Installer with the version appropriate for your platform (usually x64). In the installer wizard, we recommend selecting the “Camera evaluation” option, it is the smallest one and installs everything required for the Python. The other options might require installing various Visual Studio runtimes.</p></li>
<li><p>Download the Python package from the same link, selecting the appropriate operating system and version of Python (cp37 for Python 3.7 (recommended above) and cp36 for 3.6). Install the python module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="s2">&quot;path_to_extracted_zip/spinnaker_python-1.24.0.60-cp37-cp37m-win_amd64.zip&quot;</span>
</pre></div>
</div>
</li>
</ol>
<p>(with the file with the appropriate OS and Python versions)</p>
</div>
<div class="section" id="national-instruments-framegrabber-with-mikrotron-camera">
<h3>National Instruments framegrabber with Mikrotron camera<a class="headerlink" href="#national-instruments-framegrabber-with-mikrotron-camera" title="Permalink to this headline">¶</a></h3>
<p>Install the NI vision SDK. For the Mikrotron MC1362 camera, you can use <a class="reference external" href="http://www.portugueslab.com/files/MikrotronMC1362.icd">this</a>
camera file. The camera file usually needs to be put into C:UsersPublicPublic DocumentsNational InstrumentsNI-IMAQData
After putting the camera file there, is should be selected for the image acquisition device in NI MAX.</p>
</div>
<div class="section" id="basler-pypylon">
<h3>Basler: pypylon<a class="headerlink" href="#basler-pypylon" title="Permalink to this headline">¶</a></h3>
<p>Please refer to the instructions <a class="reference external" href="https://github.com/basler/pypylon">here</a>. After following the instructions it will work with Stytra.</p>
</div>
</div>
<div class="section" id="external-hardware-support">
<h2>External hardware support<a class="headerlink" href="#external-hardware-support" title="Permalink to this headline">¶</a></h2>
<div class="section" id="national-instruments-boards">
<h3>National Instruments Boards<a class="headerlink" href="#national-instruments-boards" title="Permalink to this headline">¶</a></h3>
<p>Install the drivers and afterwards the Python package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">nidaqmx</span>
</pre></div>
</div>
</div>
<div class="section" id="labjack-u3">
<h3>LabJack U3<a class="headerlink" href="#labjack-u3" title="Permalink to this headline">¶</a></h3>
<p>Check out the instructions <a class="reference external" href="https://github.com/labjack/LabJackPython">here</a>.</p>
</div>
<div class="section" id="pyboard-arduino">
<h3>PyBoard/Arduino<a class="headerlink" href="#pyboard-arduino" title="Permalink to this headline">¶</a></h3>
<p>To communicate with microcontroller boards usually a serial connection is used.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pyserial</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="1_examples_gallery.html" class="btn btn-neutral float-right" title="Designing and running experiments" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../overview/9_references.html" class="btn btn-neutral float-left" title="References" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Vilim Štih and Luigi Petrucco, @portugueslab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>