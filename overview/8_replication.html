

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Experiment replication &mdash; Stytra 0.8.34 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="References" href="9_references.html" />
    <link rel="prev" title="Comparison with existing software and limitations" href="7_comparison.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4987a7" >
          

          
            <a href="../index.html" class="icon icon-home"> Stytra
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.8.32
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="0_motivation.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_library_structure.html">The structure of Stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="2_stimulation_intro.html">Stimulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="3_tracking.html">Image acquisition and tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_closed_loop.html">Closed-loop stimuli design</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_external_sync.html">Synchronizing stimulation with data acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="6_hardware_list.html">Hardware description</a></li>
<li class="toctree-l1"><a class="reference internal" href="7_comparison.html">Comparison with existing software and limitations</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Experiment replication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#closed-loop-motor-adaptation">Closed-loop motor adaptation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#closed-loop-phototaxis-assay">Closed-loop phototaxis assay</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="9_references.html">References</a></li>
</ul>
<p class="caption"><span class="caption-text">User guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/0_install_guide.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/1_examples_gallery.html">Designing and running experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/2_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/3_tracking.html">Tracking configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/4_calibration.html">Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/5_configuring_computer.html">Configuring a computer for Stytra experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/6_coordinate_systems.html">Coordinate systems in Stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/7_offline.html">Offline use of Stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/8_faqs.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/0_module_desc.html">Module description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/1_pipelines.html">Implementation of image processing pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/2_triggering_intro.html">Triggering a Stytra protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/3_data_saving.html">Data and metadata saving</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/4_parameters_stytra.html">Parameters in stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devdocs/5_status_messages.html">Process status messages</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Stytra</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Experiment replication</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/overview/8_replication.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script><div class="section" id="experiment-replication">
<span id="reproduction"></span><h1>Experiment replication<a class="headerlink" href="#experiment-replication" title="Permalink to this headline">¶</a></h1>
<p>One of the main strengths of Stytra is the possibility of
sharing the experimental paradigms described in a publication
as scripts that can be run on different platforms and experimental
hardware. To prove the validity of this approach, we decided to showcase
the software reproducing the results from two publications that investigated
different behaviors of the larval zebrafish. This allowed us to
verify the performance of our package in producing and monitoring
reliable behavioral responses, and showed how the Stytra platform
can be used to share the code underlying an experimental paradigm.
The scripts used for designing these experiments are available in
our repository, together with a full list of parts and description
of the hardware. In this way, everyone can independently replicate
the experiments simply by installing and running Stytra on a suitable
behavioral setup.</p>
<div class="section" id="closed-loop-motor-adaptation">
<h2>Closed-loop motor adaptation<a class="headerlink" href="#closed-loop-motor-adaptation" title="Permalink to this headline">¶</a></h2>
<p>To demonstrate the effectiveness of the closed-loop stimulation
software for head-restrained larvae, we re-implemented in Stytra
one of the paradigms described in <a class="bibtex reference internal" href="9_references.html#portugues2011adaptive" id="id1">[PE11]</a>.
This paper addresses the importance of instantaneous visual feedback
in the control of  the optomotor response in seven dpf  zebrafish larvae.</p>
<p>In <a class="bibtex reference internal" href="9_references.html#portugues2011adaptive" id="id2">[PE11]</a>,  a closed-loop paradigm was used to
have real-time control over the visual feedback that the animal receives
upon swimming. After triggering motor activity with forward-moving black
and white gratings (10 mm/s, 0.1 cycles/mm), online tail tracking was used
to estimate the expected velocity of the fish based on freely-moving
observations, and a backward velocity proportional to the expected
forward velocity was imposed over the forward grating speed. In one
crucial experiment (Fig 3 of <a class="bibtex reference internal" href="9_references.html#portugues2011adaptive" id="id3">[PE11]</a>) the authors
demonstrated that reducing or increasing the magnitude of this velocity
by a factor of 1.5 (high gain) or 0.5 (low gain) resulted in modifications
of the bout parameters such as bout length and inter-bout interval
(time between two consecutive bouts). The figure below
shows the inter-bout interval along the protocol,
where the three gain conditions were presented in a sequence
that tested all possible gain transitions. When the gain increased
the fish was consistently swimming less (higher inter-bout interval),
while the opposite was observed when the gain decreased. Therefore,
as expected, fish adapted the swimming parameters to compensate for
changes in visual feedback. The line represents the average normalized inter-bout time, and bars represent standard error of the mean from n=28 larvae. Here is the figure adapted fron adapted from <a class="bibtex reference internal" href="9_references.html#portugues2011adaptive" id="id4">[PE11]</a>).</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/portugues2011.png"><img alt="../_images/portugues2011.png" src="../_images/portugues2011.png" style="width: 370.0px; height: 304.5px;" /></a>
</div>
<p>We reproduced exactly the same protocol within Stytra, and we used
Stytra modules for closed-loop control of a visual stimulus to
compare whether it could replicate the findings from
<a class="bibtex reference internal" href="9_references.html#portugues2011adaptive" id="id5">[PE11]</a>. The cumulative angle of the
extracted tail segments was used with a gain factor to estimate
the fish velocity and the gain factor was changed in a sequence matching
the protocol in <a class="bibtex reference internal" href="9_references.html#portugues2011adaptive" id="id6">[PE11]</a>. The replication with Stytra
yielded the same result:
inter-bout interval decreased in low gain conditions and increased in
high gain conditions. Here are plotted average and individual fish (n=24 larvae):</p>
<html><head><meta charset="utf-8" /></head><body><div id="0db5eca2-bc96-4d7b-a3da-f0157ebd6150" style="height: 600px; width: 800px;" class="plotly-graph-div"></div><script type="text/javascript">window.PLOTLYENV=window.PLOTLYENV || {};window.PLOTLYENV.BASE_URL="https://plot.ly";
if (document.getElementById("0db5eca2-bc96-4d7b-a3da-f0157ebd6150")) {
    Plotly.newPlot("0db5eca2-bc96-4d7b-a3da-f0157ebd6150", [{"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.8206927147171506, 1.3611346814872625, 0.8181726037955869, 0.8092934517049741, 0.6916331944546019, 0.845892699225597, 0.6800092231074867, 0.5511840157537496, 0.8710149594470836, 0.9560006444040877, 0.8341698478048009, 0.6918738510217489, 0.7988953025077468, 1.18368676630756, 0.7460342017323998, 0.7746540751891885, 0.9125950187769443, 0.7293862687736535], "type": "scatter", "uid": "2cf2745f-7c79-4647-95a2-7b05d35bd70f"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.9790536841287635, 0.8114268747721863, 1.2095194410990497, 0.9551567557147315, 0.9128286937717405, 0.7623183860907482, 1.0636707557898841, 0.7403164384505643, 0.8903679772767104, 0.7237220865060392, 1.0199045861888383, 0.9499927624894983, 0.5902990229276355, 0.4834788657110806, 0.5373783293601082, 0.8061289159860814, 1.0731096406167608, 1.1147946678673792], "type": "scatter", "uid": "267d2bc4-001c-48c3-847a-ab243a9813f9"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.1494251581592687, 0.9027253165145765, 0.9478495253261546, 0.9017035090681573, 0.8741619950365758, 0.8489687560611705, 0.8517364975818049, 0.8197930558917609, 0.7060458116873491, 0.9990447446578969, 0.8796123143873064, 0.8472234493438126, 0.8347236780676955, 0.7090216004186327, 0.819726869745585, 1.0472028511277147, 1.113254115591543, 0.7839439258004088], "type": "scatter", "uid": "c3bae7a7-e55a-48ac-bafc-6221b355e2c6"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.2210352317762154, 0.9856400194513185, 0.7933247487724656, 1.2499763727148954, 1.161788308985201, 1.4961679989012777, 0.6606993134200606, 0.5345889083607883, 0.5317386216644298, 1.3122284265716506, 1.0553683200586352, 1.168815238993255, 0.5661977826373163, 0.5739417078671052, 0.6185649777670236, 1.4081171143568012, 1.300960935491016, 1.004686920498179], "type": "scatter", "uid": "569b97a5-42fd-4e4c-9da4-9ed355ca0dfd"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.860666321954009, 1.136479246930076, 1.0028544311159142, 1.1698857150387747, 1.0515476160042583, 1.413893333625247, 0.7685250460312412, 0.5813834550300832, 0.55368238578587, 0.7976164518405229, 0.9761232515020267, 0.8684078286544293, 0.8397500775368014, 0.8765851032877334, 0.7437481742110278, 1.5938233718423755, 1.1726198968638977, 0.8792697413483841], "type": "scatter", "uid": "070acd1e-2511-416b-b99e-ac5c8f98a897"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.3131795669962572, 1.0570948586746012, 0.6297255743291416, 2.106397759909039, 1.3404512771971824, 0.9871339150306688, 0.5501025402524646, 0.8325347719004919, 0.9343856095840468, 1.2997497248413636, 0.842568529540764, 0.9155663413460793, 0.571935732235559, 0.40991532904594913, 0.529191751313436, 1.3734941641063894, 2.1696803168610077, 1.2234824732100047], "type": "scatter", "uid": "acabfe41-6603-4a07-aaa9-4f959f39a010"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.0283090917684832, 0.9780171588130205, 0.9936737494184962, 1.1583546722295386, 1.3003190312424706, 1.0461065358936192, 0.9939935980519167, 0.8624727538465176, 1.0320875702911843, 1.8209302548731714, 1.183312004167991, 1.124751984038874, 0.3158650640677922, 0.33722555273780613, null, 1.1755780642121016, 1.7474482298332512, 0.9071546940807546], "type": "scatter", "uid": "91cd3884-f11c-4f34-b016-ab60c557942b"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.8906429137376486, 1.2094294382233948, 0.8999276480389562, 1.1724732030534324, 1.1344310555153247, 0.9787125413001295, 0.673052618486893, 0.7355737066191491, 0.6258738211681841, 1.2793348791225114, 0.8492067588089595, 0.8612879275640527, 0.6421906553388472, 0.7371030422125106, 0.5400908879490859, 0.8127756642439808, 0.8783717853646383, 1.10220423361189], "type": "scatter", "uid": "9ae79e15-37d6-46f9-8f47-864f784dc8b8"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.2580292372746185, 0.9249681340328392, 0.8170026286925423, 1.0210565740788744, 1.2579870947828178, 1.0331911768231938, 0.7011322220368585, 0.844468108060603, 0.5222750852089711, 1.1537808870126747, 1.1666660007112681, 1.1003168615918708, 0.6862794285703259, 0.5602628892343157, 0.6907357317384885, 1.346809607339371, 1.229187477773792, 1.197342176055973], "type": "scatter", "uid": "8f8b20cf-c81c-410f-9ef6-205b71517371"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.7247429389643057, 0.7111380208823936, 1.5641190401533005, 0.7690474151069527, 0.7860371021926953, 1.0102755658543614, 0.864769405200832, 0.8445810213487711, 0.9475021556081055, 0.9416001765434435, 0.7892163536967849, 0.6530817345360129, 0.500331969444362, 0.636103382376939, 0.45109206191208756, 1.5067025553423627, 1.3261582797364788, 1.9150694765981084], "type": "scatter", "uid": "5002eacf-10d6-41ce-bc91-4c613d68ea95"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.1459934416646997, 0.8664799644655765, 0.9875265938697237, 0.9878243221761698, 1.1019407297916473, 1.0162334440384533, 0.9033523925453759, 0.8074828603073927, 0.6763912531711597, 0.9304423815095599, 0.88669407442931, 0.8133512151688908, 0.4405245670569878, 0.4780009754558432, 0.6186199064693024, 0.9010386371060859, 0.8988911561773969, 0.8458783089376545], "type": "scatter", "uid": "2b99398f-fa6d-4483-ad07-7f73c2c45574"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.1235475222988678, 0.9822300306892442, 0.8942224470118878, 0.9492639847029015, 0.9485230849839591, 0.8424501182432019, 0.6117607078657725, 0.6164762108213527, 0.5503809105643683, 1.0093722779612173, 0.9888293221828396, 0.7962080667063053, 0.5951678994241805, 0.8651724368173845, 0.6883182673727312, 1.2419440830172064, 0.8107903721033657, 1.014782987384798], "type": "scatter", "uid": "066a5c2d-ff2c-4a50-a6a7-5f8afc0ef83b"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.9053275506270654, 1.1291873271430228, 0.9654851222299117, 1.15208601908279, 1.2662465005102892, 1.232667462134257, 0.7746347015476288, 0.6964661058878652, 0.9024815228450063, 0.9760675462591722, 0.8071429766398495, 1.3446763161155681, 0.9947839834155341, 1.356526961577566, 0.4788043758269179, 1.205911812805719, 1.1300647357598097, 1.292859018985166], "type": "scatter", "uid": "1b6334f6-e65e-4835-b456-6da401c4b65a"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.979541946483455, 1.0026082967129506, 1.0178497568035942, 1.2062470114095516, 1.2912882619651735, 1.173983742484099, 0.9075398417816503, 0.9994759049851137, 0.716244725994182, 1.0696189975861963, 1.1680732916973682, 1.0532190644036892, 1.116171803264155, 0.7756753655720894, 1.3152626409892028, 1.3334928979820346, 1.277296136474227, 1.8503628669218184], "type": "scatter", "uid": "261e7877-1338-4bfc-b62b-63bdf2a181bb"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.9654926479267321, 1.10131453628123, 0.9331928157920378, 0.8158622782765509, 1.016143181069044, 1.1830856378085446, 0.9700345648423386, 1.1047719129240996, 1.277490238192384, 0.9962840828959532, 0.9835270837074876, 1.0435015075715437, 1.3119052380416194, 1.187064475976361, 1.167366234217281, 1.3114647740315566, 1.0835726905338334, 1.1381279213752613], "type": "scatter", "uid": "e39e6b1d-f4a5-47df-b2cc-9675679f10cb"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.1629061479901963, 1.009256039759487, 0.8278378122503165, 1.0877992401521868, 1.0027938891263193, 0.8947318936033668, 0.3924438146296349, 0.4782160257594792, 0.6212311861489958, 1.09497187860578, 1.0783897628942087, 0.8630985015590604, 0.4121867844794431, 0.4071805456325332, 0.4041148788046816, 1.3829290612352578, 1.234285759284766, 1.186558459137994], "type": "scatter", "uid": "faeac4b0-af1a-4e03-a6a0-2a1c14a21104"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.012897800871361, 0.9959407719143792, 0.9911614272142596, 1.0182655207109765, 1.21297575214423, 1.0861438928265925, 0.7912553825350475, 1.0294821608582407, 0.8203103823625849, 0.966451648313667, 1.049877243761131, 1.079507751765624, 0.9812746160427421, 1.0286753619623303, 1.0247939829271229, 1.00488040475438, 1.1557196653147161, 1.1440227672325287], "type": "scatter", "uid": "a2aea492-09f1-4c04-a055-f68b4dd3f3e1"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.84041475160586, 1.215639623904599, 0.9439456244895407, 2.1298411992749084, 1.2710410298072912, 0.9781277174052755, 0.5856730361748393, 0.8034694804653466, 0.7210987953039703, 0.9033120943410099, 0.7363689996827018, 1.018711947746448, 0.7565135524145349, 0.7453122750652926, 0.7765269277122279, 1.2516952528105771, 1.3016432291281632, 1.095096247574381], "type": "scatter", "uid": "49469896-013d-4b2c-845f-d1aad5d717b0"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.8891883185075976, 0.9351804547581021, 1.1756312267343, 1.0334781504535224, 1.0991746563490643, 1.0321295200378215, 0.680314074434173, 0.7074299782471978, 0.6598926643752461, 1.0034311849256086, 0.9369371418513306, 0.8473919213281773, 0.6838410711502358, 0.7754774895469162, 0.692978320858934, 0.8490105255093113, 1.0403123257966518, 0.9486097919732451], "type": "scatter", "uid": "ed91dc28-9eee-498e-9f7d-68e075319c86"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.9236101464172642, 0.96174249106516, 1.1146473625175761, 0.9967987106345565, 0.8487241736143722, 1.1808013000934043, 0.9947962993981317, 0.9323497029995936, 0.7538027350675666, 0.8244943563381344, 0.8591796080621802, 0.8036168997532763, 0.8828695565697886, 0.7666965844075135, 0.6157764255802737, 0.8876793364063738, 0.8443497151585019, 0.8372178279005127], "type": "scatter", "uid": "6ee4e463-af8d-4f26-b83f-0a33081ceda3"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.911790677931937, 0.9578987737556475, 1.1303105483124154, 1.4336411730185945, 1.1891648465374831, 1.2927101140188744, 0.49409675544271553, 0.7200178488663552, null, 1.0991855312666399, 1.0299102940624156, 0.9281188553957158, null, null, null, 1.2789577610327683, 1.182873722553369, 1.1040508430220644], "type": "scatter", "uid": "1923c260-e632-42dd-8cd2-b883d9842910"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.057503933464765, 1.0227533789005505, 0.9197426876346846, 0.9732532385733442, 1.0973446847503647, 0.9859240749076996, 0.6627180007314405, 0.5637616090787985, 0.7743964082112419, 1.4783234697979395, 0.9631336561564572, 0.9346070442289424, 0.5607915600891078, 0.6818866898249333, 0.7583243521343503, 1.4983789141930133, 1.2791629565677887, 0.9311977966326983], "type": "scatter", "uid": "9e1d042a-72ba-473c-992a-f610b93bfbb0"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.5674118197563751, 0.8090090336326525, 0.6235791466109725, 1.1515702184264858, 0.9294347496113319, 0.9532857042819963, 1.2994790777262106, null, 1.563693482469874, 1.1620529139345155, 1.3187480634308302, 0.708812170906991, null, null, null, 1.1790712706116286, 1.4218620705609748, 1.2358159428241744], "type": "scatter", "uid": "9bc13d27-4f14-45a8-a1e3-e683c653557a"}, {"hoverinfo": "none", "line": {"color": "rgb(100, 100, 100)", "width": 0.5}, "mode": "lines", "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [0.9730869211949255, 0.9407007476325444, 1.0862123311725305, 1.037636334118454, 0.9179177267168936, 0.9495914941155856, 0.8798390379570828, 0.8695709113461682, 0.8901321401830907, 1.108771666471402, 1.1924214565924984, 1.021937048883321, 0.7611356642638715, 0.8465816090247369, 0.8129457530068604, 1.056497503604976, 0.9858365505003135, 1.0024254399526724], "type": "scatter", "uid": "d160ed21-dd58-495d-9f87-dd29b3d7f9b1"}, {"error_y": {"array": [0.03823320050667592, 0.029198270342594458, 0.03962783853683055, 0.0689349177769734, 0.03662528927577521, 0.03681941028071049, 0.04145954690503067, 0.033702276559916, 0.050148984871042065, 0.047993674137937536, 0.030515954317550237, 0.03349172810233041, 0.048913414940844925, 0.05443978221516364, 0.046355748616144464, 0.04987493038573498, 0.06032572378364378, 0.05793344085630439], "type": "data", "visible": true}, "line": {"color": "rgb(76, 114, 176)", "width": 2}, "x": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18], "y": [1.0293537702590758, 1.0003331341832007, 0.9703130955577232, 1.1369547012345984, 1.0709957765066804, 1.0510219593668824, 0.7814845378154786, 0.7685159542525863, 0.8061965409831132, 1.0794495127741734, 0.9831408725840828, 0.9349198454630495, 0.7201652277066493, 0.7464352277301424, 0.7157330976966253, 1.1761766091186356, 1.190418615950967, 1.1035141999041544], "type": "scatter", "uid": "b3ebc416-6934-4fe0-bcbc-76fff36ceade"}], {"annotations": [{"showarrow": false, "text": "gain 1", "x": 2, "xref": "x", "y": 0.95, "yref": "paper"}, {"showarrow": false, "text": "gain 0.5", "x": 5, "xref": "x", "y": 0.95, "yref": "paper"}, {"showarrow": false, "text": "gain 1.5", "x": 8, "xref": "x", "y": 0.95, "yref": "paper"}, {"showarrow": false, "text": "gain 1", "x": 11, "xref": "x", "y": 0.95, "yref": "paper"}, {"showarrow": false, "text": "gain 1.5", "x": 14, "xref": "x", "y": 0.95, "yref": "paper"}, {"showarrow": false, "text": "gain 0.5", "x": 17, "xref": "x", "y": 0.95, "yref": "paper"}], "autosize": true, "font": {"family": "Droid Sans, sans-serif", "size": 14}, "height": 600, "paper_bgcolor": "rgba(0,0,0,0)", "plot_bgcolor": "rgba(0,0,0,0)", "shapes": [{"fillcolor": "rgb(229, 229, 229)", "layer": "below", "line": {"width": 0}, "x0": -1.5, "x1": 3.5, "xref": "x", "y0": 0, "y1": 1, "yref": "paper"}, {"fillcolor": "rgb(229, 229, 229)", "layer": "below", "line": {"width": 0}, "x0": 9.5, "x1": 12.5, "xref": "x", "y0": 0, "y1": 1, "yref": "paper"}, {"fillcolor": "rgb(178, 178, 178)", "layer": "below", "line": {"width": 0}, "x0": 6.5, "x1": 9.5, "xref": "x", "y0": 0, "y1": 1, "yref": "paper"}, {"fillcolor": "rgb(178, 178, 178)", "layer": "below", "line": {"width": 0}, "x0": 12.5, "x1": 15.5, "xref": "x", "y0": 0, "y1": 1, "yref": "paper"}], "showlegend": false, "title": {"text": "Inter-bout time with varying gains"}, "width": 800, "xaxis": {"autorange": false, "dtick": 3, "range": [0.5, 19.5], "showgrid": false, "showline": false, "tick0": 2, "title": {"text": "Trial n."}, "type": "linear", "zeroline": false}, "yaxis": {"autorange": false, "range": [0.5, 1.5], "showgrid": false, "showline": false, "title": {"text": "Relative inter-bout time"}, "type": "linear", "zeroline": false}}, {"showLink": false, "linkText": "Export to plot.ly", "plotlyServerURL": "https://plot.ly"}); 
}
</script></body></html></div>
<div class="section" id="closed-loop-phototaxis-assay">
<h2>Closed-loop phototaxis assay<a class="headerlink" href="#closed-loop-phototaxis-assay" title="Permalink to this headline">¶</a></h2>
<p>To test the freely swimming closed-loop performance,
we replicated a protocol from <a class="bibtex reference internal" href="9_references.html#huang2013spinal" id="id7">[HADE13]</a>. The fish is induced
to perform phototaxis by keeping half of its visual field (the left or the
right side) bright while the other is dark. The fish is more likely to
turn to the bright side. The stimulus is constantly updated so that the
light-dark boundary is always along the mid-line of the fish. We replicated
the qualitative trends observed in <a class="bibtex reference internal" href="9_references.html#huang2013spinal" id="id8">[HADE13]</a>, however the
ratios of forward swims to turns are notably different
(figure below). The variability of fish responses and
differences in the stimulus presentation setup (e.g. projector brightness)
could account for these differences. Also, to reduce duration of the
experiments, we included a radially-inward moving stimulus that brings
the fish back into the field of view.</p>
<img alt="../_images/huang2013replication.png" src="../_images/huang2013replication.png" />
<p>Comparison of turning angle distribution in a closed-loop
freely-swimming phototaxis experiment.
Left: a histogram of the angle turned per bout, redrawn from
<a class="bibtex reference internal" href="9_references.html#huang2013spinal" id="id9">[HADE13]</a>.
Right: the equivalent panel, with n=10 fish and the protocol run with
Stytra. The dark shading on the plot represents the dark side of the visual
field.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="9_references.html" class="btn btn-neutral float-right" title="References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="7_comparison.html" class="btn btn-neutral float-left" title="Comparison with existing software and limitations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Vilim Štih and Luigi Petrucco, @portugueslab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>