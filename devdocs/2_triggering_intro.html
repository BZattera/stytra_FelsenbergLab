

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Triggering a Stytra protocol &mdash; Stytra 0.8.34 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data and metadata saving" href="3_data_saving.html" />
    <link rel="prev" title="Implementation of image processing pipelines" href="1_pipelines.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #4987a7" >
          

          
            <a href="../index.html" class="icon icon-home"> Stytra
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.8.32
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/0_motivation.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/1_library_structure.html">The structure of Stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/2_stimulation_intro.html">Stimulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/3_tracking.html">Image acquisition and tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/4_closed_loop.html">Closed-loop stimuli design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/5_external_sync.html">Synchronizing stimulation with data acquisition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/6_hardware_list.html">Hardware description</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/7_comparison.html">Comparison with existing software and limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/8_replication.html">Experiment replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/9_references.html">References</a></li>
</ul>
<p class="caption"><span class="caption-text">User guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userguide/0_install_guide.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/1_examples_gallery.html">Designing and running experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/2_interface.html">User interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/3_tracking.html">Tracking configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/4_calibration.html">Calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/5_configuring_computer.html">Configuring a computer for Stytra experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/6_coordinate_systems.html">Coordinate systems in Stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/7_offline.html">Offline use of Stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userguide/8_faqs.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="0_module_desc.html">Module description</a></li>
<li class="toctree-l1"><a class="reference internal" href="1_pipelines.html">Implementation of image processing pipelines</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Triggering a Stytra protocol</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#ttl-pulse-triggering-on-a-labjack-ni-board-and-serial-ports">TTL pulse triggering on a Labjack/NI board and serial ports.</a></li>
<li class="toctree-l2"><a class="reference internal" href="#zeromq">ZeroMQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="#additional-methods">Additional methods</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="3_data_saving.html">Data and metadata saving</a></li>
<li class="toctree-l1"><a class="reference internal" href="4_parameters_stytra.html">Parameters in stytra</a></li>
<li class="toctree-l1"><a class="reference internal" href="5_status_messages.html">Process status messages</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Stytra</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Triggering a Stytra protocol</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/devdocs/2_triggering_intro.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="triggering-a-stytra-protocol">
<span id="trig-desc"></span><h1>Triggering a Stytra protocol<a class="headerlink" href="#triggering-a-stytra-protocol" title="Permalink to this headline">¶</a></h1>
<p>Stytra is designed to be used in setups where the presentation of stimuli to
the  animal needs to be synchronized with an acquisition program running on a
different computer, e.g. controlling a two-photon microscope. To this end, the
triggering module provides classes to ensure communication with external devices
to time the beginning of the experiment. Two methods are already supported in
the triggering library:</p>
<div class="section" id="ttl-pulse-triggering-on-a-labjack-ni-board-and-serial-ports">
<h2>TTL pulse triggering on a Labjack/NI board and serial ports.<a class="headerlink" href="#ttl-pulse-triggering-on-a-labjack-ni-board-and-serial-ports" title="Permalink to this headline">¶</a></h2>
<p>In the first simple configuration, Stytra simply waits for a TTL pulse
received on a Labjack or a NI board to start the experiment.</p>
</div>
<div class="section" id="zeromq">
<h2>ZeroMQ<a class="headerlink" href="#zeromq" title="Permalink to this headline">¶</a></h2>
<p>Stytra employs the ZeroMQ library to synchronize the beginning
of the experiment through a message coming from the acquisition computer over
the local network. ZeroMQ is supported in a number of programming
languages and environments including LabView, and the exchange of the synchronizing message
can easily be added to custom-made or open-source software. The messages
can also be used to communicate to Stytra data such as the microscope
configuration that will be logged together with the rest of experiment
metadata.</p>
<p>A common framework to build custom software for hardware control is LabView.
In our laboratory, a LabView program is used to control the scanning from the
two-photon microscope. Below we report a screenshot of a very simple subVI
that can be used together with Stytra for triggering the start of the
stimulation. A ZMQ context is created, and than used to send a json file
with the information about microscope configuration over the network to the
ip of the computer running Stytra, identified by its IP. Stytra uses by
default port 5555 to listen for triggering messages.</p>
<a class="reference internal image-reference" href="../_images/zmq.png"><img alt="../_images/zmq.png" class="align-center" src="../_images/zmq.png" style="width: 394.40000000000003px; height: 340.8px;" /></a>
</div>
<div class="section" id="additional-methods">
<h2>Additional methods<a class="headerlink" href="#additional-methods" title="Permalink to this headline">¶</a></h2>
<p>The triggering module is also designed to be expandable.
It is possible to define new kinds of triggers, which consists of
a processes that continuously checks a condition.
To define a new trigger, e.g., starting the acquisition when a new file is
created in a folder, it is enough to write a method that uses the python
standard library to monitor folder contents.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="3_data_saving.html" class="btn btn-neutral float-right" title="Data and metadata saving" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="1_pipelines.html" class="btn btn-neutral float-left" title="Implementation of image processing pipelines" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Vilim Štih and Luigi Petrucco, @portugueslab

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>